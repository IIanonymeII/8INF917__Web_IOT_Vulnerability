import os
import sys
import threading
from django.apps import AppConfig

UPDATE_DATABASE = True

class VulnerappConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'vulnerapp'

    def ready(self):
        from database import functions

        if UPDATE_DATABASE and 'runserver' in sys.argv and os.environ.get('RUN_MAIN') == 'true':
            print("Starting update thread")
           # Thread avec offset à 0
            t0 = threading.Thread(target=functions.update_database, args=(0, "t0",))
            t0.start()
#             # Thread avec offset à 5K
#             t1 = threading.Thread(target=functions.update_database, args=(5000, "t1",))
#             t1.start()
#            # Thread avec offset à 10K
#             t2 = threading.Thread(target=functions.update_database, args=(10000, "t2",))
#             t2.start()
#             # Thread avec offset à 15K
#             t3 = threading.Thread(target=functions.update_database, args=(15000, "t3",))
#             t3.start()
#             # Thread avec offset à 20K
#             t4 = threading.Thread(target=functions.update_database, args=(20000, "t4",))
#             t4.start()
#             # Thread avec offset à 25K
#             t5 = threading.Thread(target=functions.update_database, args=(25000, "t5",))
#             t5.start()
#             # Thread avec offset à 30K
#             t6 = threading.Thread(target=functions.update_database, args=(30000, "t6",))
#             t6.start()
#             # Thread avec offset à 35K
#             t7 = threading.Thread(target=functions.update_database, args=(35000, "t7",))
#             t7.start()
#             # Thread avec offset à 40K
#             t8 = threading.Thread(target=functions.update_database, args=(40000, "t8",))
#             t8.start()