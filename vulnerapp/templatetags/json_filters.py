from django.db.models import QuerySet, Model
from django import template
import json

register = template.Library()

@register.filter
@register.filter
def json_encode(data):
	if isinstance(data, QuerySet):
		return json.dumps(list(data.values()))

	if isinstance(data, Model):
		return data.to_dict()

	return json.dumps(data)